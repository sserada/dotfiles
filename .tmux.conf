# ========== ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ– ==========
# Vimãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿ã®é…å»¶ã‚’ã‚¼ãƒ­ã«ï¼ˆNeovimãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¯å¿…é ˆï¼‰
set -s escape-time 0

# ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯å±¥æ­´ã‚’å¤§å¹…ã«å¢—åŠ ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ2000â†’50000è¡Œï¼‰
set -g history-limit 50000

# ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼æ›´æ–°é »åº¦ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ15ç§’â†’5ç§’ï¼‰
set -g status-interval 5

# ãƒãƒ«ãƒãƒ¢ãƒ‹ã‚¿ãƒ¼å¯¾å¿œï¼ˆã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ä»¥å¤–ã‚’ç¸®å°ï¼‰
setw -g aggressive-resize on

# ========== ç•ªå·ä»˜ã‘æ”¹å–„ ==========
# ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ç•ªå·ã‚’1ã‹ã‚‰é–‹å§‹ï¼ˆ0ã¯é ã„ï¼‰
set -g base-index 1

# ãƒšã‚¤ãƒ³ç•ªå·ã‚’1ã‹ã‚‰é–‹å§‹
setw -g pane-base-index 1

# ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ç•ªå·ã‚’è‡ªå‹•ãƒªãƒŠãƒ³ãƒãƒ¼ï¼ˆå‰Šé™¤æ™‚ã«è©°ã‚ã‚‹ï¼‰
set -g renumber-windows on

# ========== ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚­ãƒ¼ ==========
# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®C-bã‹ã‚‰C-tã«å¤‰æ›´
set-option -g prefix C-t
unbind-key C-b
bind-key C-t send-prefix

# ãƒã‚¦ã‚¹ãƒ¢ãƒ¼ãƒ‰
# ãƒã‚¦ã‚¹ã§ã®ãƒšã‚¤ãƒ³é¸æŠãƒ»ãƒªã‚µã‚¤ã‚ºã‚’æœ‰åŠ¹åŒ–
set-option -g mouse on

# ã‚«ãƒ©ãƒ¼è¨­å®š
# 256è‰²è¡¨ç¤ºã‚’æœ‰åŠ¹ã«ã™ã‚‹
set-option -g default-terminal "screen-256color"
set -ag terminal-overrides ",xterm-256color:RGB"

# ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰
# `v`ã§å·¦å³åˆ†å‰²ã€`s`ã§ä¸Šä¸‹åˆ†å‰²
bind v split-window -h
bind s split-window -v

# `C-`ã¨`hjkl`ã§ãƒšã‚¤ãƒ³ã‚’ç§»å‹•ã™ã‚‹
bind -r C-h select-pane -L
bind -r C-j select-pane -D
bind -r C-k select-pane -U
bind -r C-l select-pane -R

# ========== Vi copy-modeè¨­å®š ==========
# Copy modeã§Viã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã‚’ä½¿ç”¨
setw -g mode-keys vi

# Vimãƒ©ã‚¤ã‚¯ãªé¸æŠé–‹å§‹/ã‚³ãƒ”ãƒ¼
bind-key -T copy-mode-vi 'v' send -X begin-selection
bind-key -T copy-mode-vi 'y' send -X copy-pipe-and-cancel 'pbcopy'
bind-key -T copy-mode-vi 'C-v' send -X rectangle-toggle
bind-key -T copy-mode-vi Enter send -X copy-pipe-and-cancel 'pbcopy'

# Copy modeã«ç´ æ—©ãå…¥ã‚‹
bind Escape copy-mode

# ========== ä¾¿åˆ©ãªã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ ==========
# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãƒªãƒ­ãƒ¼ãƒ‰
bind r source-file ~/.tmux.conf \; display "Config reloaded!"

# åˆ†å‰²æ™‚ã«ç¾åœ¨ã®ãƒ‘ã‚¹ã‚’å¼•ãç¶™ãï¼ˆæ—¢å­˜ã®v/sã‚’ä¸Šæ›¸ãï¼‰
bind v split-window -h -c "#{pane_current_path}"
bind s split-window -v -c "#{pane_current_path}"

# æ–°è¦ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ä½œæˆæ™‚ã«ç¾åœ¨ã®ãƒ‘ã‚¹ã‚’å¼•ãç¶™ã
bind c new-window -c "#{pane_current_path}"

# ãƒšã‚¤ãƒ³æœ€å¤§åŒ–ãƒˆã‚°ãƒ«
bind m resize-pane -Z

# æœ€å¾Œã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã«ç§»å‹•
bind Tab last-window

# ãƒšã‚¤ãƒ³ãƒªã‚µã‚¤ã‚º
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# fzfé€£æº (ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦)
# prefix + F: ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’é¸æŠ
bind-key F display-popup -E "tmux list-sessions | sed -E 's/:.*$//' | fzf --reverse | xargs tmux switch-client -t"

# prefix + W: ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é¸æŠ
bind-key W display-popup -E "tmux list-windows -a | fzf --reverse | cut -d: -f1 | xargs tmux select-window -t"

# prefix + P: ãƒšã‚¤ãƒ³ã‚’é¸æŠ
bind-key P display-popup -E "tmux list-panes -a | fzf --reverse | cut -d: -f1 | xargs tmux select-pane -t"

# ========== ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒªã‚¹ãƒˆ ==========
set -g @plugin 'tmux-plugins/tpm'                  # Tmux Plugin Manager
set -g @plugin 'tmux-plugins/tmux-sensible'        # å¸¸è­˜çš„ãªãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®š
set -g @plugin 'tmux-plugins/tmux-resurrect'       # ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ä¿å­˜ã¨å¾©å…ƒ
set -g @plugin 'tmux-plugins/tmux-continuum'       # ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®è‡ªå‹•ä¿å­˜ã¨è‡ªå‹•å¾©å…ƒ
set -g @plugin 'tmux-plugins/tmux-yank'            # OSã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰é€£æº
set -g @plugin 'tmux-plugins/tmux-open'            # URLã‚„ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’é–‹ã
set -g @plugin 'egel/tmux-gruvbox'                 # gruvboxãƒ†ãƒ¼ãƒ
set -g @plugin 'tmux-plugins/tmux-cpu'             # CPUä½¿ç”¨ç‡è¡¨ç¤º
set -g @plugin 'sainnhe/tmux-fzf'                  # çµ±åˆfzfç®¡ç†UIï¼ˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€è¤‡æ•°é¸æŠå¯¾å¿œï¼‰
set -g @plugin 'fcsonline/tmux-thumbs'             # é«˜é€Ÿãƒ†ã‚­ã‚¹ãƒˆé¸æŠï¼ˆURLã€ãƒ‘ã‚¹ã€Git SHAãªã©ï¼‰
set -g @plugin '27medkamal/tmux-session-wizard'    # zoxideçµ±åˆã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
set -g @plugin 'laktak/extrakto'                   # ã‚¿ãƒ¼ãƒŸãƒŠãƒ«å‡ºåŠ›ã‹ã‚‰ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡º
set -g @plugin 'tmux-plugins/tmux-prefix-highlight' # ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚­ãƒ¼å…¥åŠ›çŠ¶æ…‹ã‚’è¦–è¦šåŒ–
set -g @plugin 'tmux-plugins/tmux-battery'         # ãƒãƒƒãƒ†ãƒªãƒ¼æ®‹é‡è¡¨ç¤º

# ========== ãƒ—ãƒ©ã‚°ã‚¤ãƒ³è¨­å®š ==========
# tmux-fzf: çµ±åˆfzfç®¡ç†UI
# æ—¢å­˜ã®prefix+Fã¨ç«¶åˆã™ã‚‹ãŸã‚ã€prefix+Ctrl-fã«å¤‰æ›´
set -g @tmux-fzf-launch-key "C-f"
set -g @TMUX_FZF_OPTIONS "-p -w 80% -h 80% -m"
set -g @TMUX_FZF_ORDER "session|window|pane|command|keybinding|clipboard|process"

# tmux-session-wizard: zoxideçµ±åˆã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
# prefix + T ã§èµ·å‹•
set -g @session-wizard 'T'

# tmux-thumbs: ãƒ†ã‚­ã‚¹ãƒˆé¸æŠè¨­å®š
set -g @thumbs-key Space
set -g @thumbs-alphabet colemak-homerow  # ã¾ãŸã¯ qwerty-homerow
set -g @thumbs-reverse enabled
set -g @thumbs-unique enabled

# extrakto: ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡ºè¨­å®š
# prefix + tab ã§èµ·å‹•ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
set -g @extrakto_split_size "15"
set -g @extrakto_clip_tool "pbcopy"  # macOSç”¨ï¼ˆLinuxã¯"xclip -selection clipboard"ï¼‰
set -g @extrakto_fzf_tool "fzf"

# tmux-prefix-highlight: ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹è¡¨ç¤ºè¨­å®š
set -g @prefix_highlight_show_copy_mode 'on'
set -g @prefix_highlight_copy_mode_attr 'fg=black,bg=yellow,bold'
set -g @prefix_highlight_prefix_prompt 'Wait'
set -g @prefix_highlight_copy_prompt 'Copy'

# tmux-battery: ãƒãƒƒãƒ†ãƒªãƒ¼è¡¨ç¤ºè¨­å®š
set -g @batt_icon_status_charged 'ğŸ”‹'
set -g @batt_icon_status_charging 'âš¡'
set -g @batt_icon_status_discharging 'ğŸ”‹'

# ========== ãã®ä»–è¨­å®š ==========
# ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚¤ãƒ™ãƒ³ãƒˆã‚’æœ‰åŠ¹åŒ–ï¼ˆVim/Neovimã¨ã®é€£æºï¼‰
set -g focus-events on

# ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºæ™‚é–“ã‚’å»¶é•·ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ750msâ†’4ç§’ï¼‰
set -g display-time 4000

# ========== ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼åˆæœŸåŒ– ==========
# ã“ã®è¡Œã¯å¿…ãšæœ€å¾Œã«è¨˜è¿°ã™ã‚‹ã“ã¨
run '~/.tmux/plugins/tpm/tpm'

# ========== ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ©ã‚¤ãƒ³è¨­å®š ==========
# ãƒ†ãƒ¼ãƒãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®è¨­å®šã‚’ä¸Šæ›¸ã
set -g status-right '#{prefix_highlight} | #{battery_icon} #{battery_percentage} | #{cpu_percentage} | %H:%M %Y/%m/%d'
